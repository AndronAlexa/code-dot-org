%h1 StaticPages#pwa_demo
%p Find me in app/views/static_pages/pwa_demo.html.haml
%p Offline oceans

<link rel="manifest" href="/manifest.webmanifest">

%script{src: webpack_asset_path('js/registerSw.js')}

-# add manifest
-# register service worker, move it to another js file.
-# how to

:javascript
  window.addEventListener('load', () => {
    if ("serviceWorker" in navigator) {
      console.log("=====Found serviceWorker=====");

      navigator.serviceWorker.register("/sw.js")
        .then(registration => {
          console.log("=====SW is registered, scope is", registration.scope, "=====");
          console.log(registration);
        })
        .catch(
          error => console.error(error)
        );
    } else {
      console.log("=====No serviceWorker=====");
    }
  });
